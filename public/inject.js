(function(){"use strict";class i{originalFetch;config;pendingRequests=new Map;constructor(t){this.originalFetch=window.fetch,this.config=t}install(){window.fetch=this.createInterceptedFetch()}uninstall(){window.fetch=this.originalFetch,this.pendingRequests.clear()}async handleInterceptedRequest(t){const[e,n]=t,r=n?.body;return!r||typeof r!="string"?(console.warn("[FetchInterceptor] No body or non-string body, skipping"),this.originalFetch.apply(window,t)):(console.log("[FetchInterceptor] Intercepting ChatGPT API call",e),this.originalFetch.apply(window,t))}shouldIntercept(t){return t.includes(this.config.targetUrlPattern)}extractUrl(t){return typeof t=="string"?t:t instanceof URL?t.href:t instanceof Request?t.url:""}createInterceptedFetch(){return async(...t)=>{const[e]=t,n=this.extractUrl(e);return this.shouldIntercept(n)?this.handleInterceptedRequest(t):this.originalFetch.apply(window,t)}}}console.log("[Inject] initialized");const c={targetUrlPattern:"/conversation",requestTimeout:2e3};new i(c).install()})();
